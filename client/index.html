<!doctype html>

<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>A Basic HTML5 Template</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <h1><center>FitBit Data View</center></h1>
  <label for="cars">Choose a purpose:</label>

<select name="cars" id="cars">
 <option value="volvo">Volvo</option>
 <option value="saab">Saab</option>
 <option value="mercedes">Mercedes</option>
 <option value="audi">Audi</option>
</select>
  <!-- <div><canvas id="bar-chart" width="1000" height="80"></canvas></div> -->
  <div><canvas id="line-chart" width="800" height="80"></canvas></div>



</body>

<script>
  var superQuery = `query getInfluencerMarketing($Purpose: String!){
  DailyActivity(Purpose:$Purpose, Id:4020332650) {
    Id,
    ActivityDate,
    TotalSteps,
    TotalDistance,
    TrackerDistance,
    LoggedActivitiesDistance,
    VeryActiveDistance,
    ModeratelyActiveDistance,
    LightActiveDistance,
    SedentaryActiveDistance,
    VeryActiveMinutes,
    FairlyActiveMinutes,
    LightlyActiveMinutes,
    SedentaryMinutes,
    Calories,
  }
}`

  $.ajax({
    method: "POST",
    url: "http://localhost:4000",
    contentType: "application/json",
    data: JSON.stringify({
      query: superQuery,
      variables: {
        "Purpose": "track activity"
      }
    }),
    success: function(data) {
      console.log(data);

      var totalSteps = [];
      for (var i = 0; i < data.data.DailyActivity.length; i++) {
        totalSteps.push(data.data.DailyActivity[i].TotalSteps);
      }
      console.log("TotalSteps=" + totalSteps)

      var totalDistance = [];
      for (var i = 0; i < data.data.DailyActivity.length; i++) {
        totalDistance.push(data.data.DailyActivity[i].TotalDistance);
      }
      console.log("TotalDistance=" + totalDistance)

      var trackerDistance = [];
      for (var i = 0; i < data.data.DailyActivity.length; i++) {
        totalDistance.push(data.data.DailyActivity[i].TrackerDistance);
      }
      console.log("TrackerDistance=" + trackerDistance)

      var calories = [];
      for (var i = 0; i < data.data.DailyActivity.length; i++) {
        calories.push(data.data.DailyActivity[i].Calories);
      }
      console.log("Calories=" + calories)

      // Line chart
      new Chart(document.getElementById("line-chart"), {
        type: 'line',
        data: {
          labels: totalSteps,
          datasets: [{
            data: totalSteps,
            label: "TotalSteps",
            borderColor: "#3e95cd",
            fill: false
          },
          {
            data: totalDistance,
            label: "TotalDistance",
            borderColor: "#8A2BE2",
            fill: false
          },
          {
            data: trackerDistance,
            label: "TrackerDistance",
            borderColor: "#e8c3b9",
            fill: false
          },
          {
            data: calories,
            label: "Calories",
            borderColor: "#3cba9f",
            fill: false
          }
        ]
        },
        options: {
          title: {
            display: true,
            text: 'DailyActivity'
          }
        }
      });

    }
  })
</script>


</html>
