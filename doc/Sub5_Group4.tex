\documentclass[conference]{IEEEtran}
\IEEEoverridecommandlockouts
% The preceding line is only needed to identify funding in the first footnote. If that is unneeded, please comment it out.
\usepackage{cite}
\usepackage{amsmath,amssymb,amsfonts}
\usepackage{algorithmic}
\usepackage{graphicx}
\usepackage{textcomp}
\usepackage{xcolor}
\def\BibTeX{{\rm B\kern-.05em{\sc i\kern-.025em b}\kern-.08em
    T\kern-.1667em\lower.7ex\hbox{E}\kern-.125emX}}
\usepackage{listings}
\lstset{
language=C,
basicstyle=\small\sffamily,
numbers=left,
numberstyle=\tiny,
frame=tb,
xleftmargin=10pt,
xrightmargin=10pt,
columns=fullflexible,
showstringspaces=false
}
\begin{document}

\title{Advanced Access Control in GraphQL\\}

\author{\IEEEauthorblockN{Jaber, Amin Fayeq Nimer}
\IEEEauthorblockA{
\textit{TU Berlin}\\
some@mail.de}
\and
\IEEEauthorblockN{Klausing, Wilke}
\IEEEauthorblockA{
\textit{TU Berlin}\\
some@mail.de}
\and
\IEEEauthorblockN{Nguyen, Huy Viet}
\IEEEauthorblockA{
\textit{TU Berlin}\\
huy.v.nguyen@campus.tu-berlin.de}
}

\maketitle

\begin{abstract}
GraphQL is a query language for reading and mutating data in APIs. It provides the back-end developer a type system to describe a data schema. This in turn gives front-end developers of the API the power to request the exact data they need. Although GraphQL is perceived as 'the successor of the good old REST', there is no widely established way to easily implement access control in GraphQL APIs. In this paper we will give a deeper insight to GraphQL, touch on different access control models that are common practice, show existing technologies that enable access control in GraphQL and introduce a new way to allow purposed-based access control in GraphQL which goes beyond traditional, account- or role-based access control.

\end{abstract}

\begin{IEEEkeywords}
Privacy Engineering, Access Control, GraphQL, Apollo Server
\end{IEEEkeywords}

\section{Introduction}\label{intro}
Write what this paper is about and what topics will be introduced in each chapter.

\section{Background}\label{basic}

TODO (Introduction text for the background chapter)

\subsection{GraphQL}\label{graphql}

TODO (what it is, pros and cons)

\subsection{Privacy Engineering}\label{privacy}

TODO (what privacy engineering is in general, the impact and importance of PE in our lifes)

\subsection{Access Control}\label{access_control}

TODO (most common access control models + detailed explaination for purpose based access control)

\section{Existing Technologies}\label{ex_tech}

This chapter will introduce two APIs that are used for access control for current GraphQL frameworks. GraphQL Shield, which creates an additional permission layer on top of existing GraphQL APIs and GraphQL Filter which enables the back-end developer to filter the output of processed requests.

\subsection{GraphQL Shield}\label{shield}

GraphQL Shield is based on GraphQL Middleware which makes it possible to run arbitrary code before or after a GraphQL resolver is invoked. The Shield API was made to create field, type and role-based access control for any GraphQL and is compatible with all JavaScript GraphQL servers. The GraphQL Shield can be added into existing GraphQL Servers via GraphQL Middleware:

\begin{lstlisting}[label=some-code,caption=Integration \cite{b1}]
// Permissions...

// Apply permissions middleware with applyMiddleware
// Giving any schema (instance of GraphQLSchema)

import { applyMiddleware } from 'graphql-middleware'
// schema definition...
schema = applyMiddleware(schema, permissions)
\end{lstlisting}

And rules can be set by using logical operations: OR, AND, NOT, CHAIN (rules will be executed one by one until one fails or all pass) and RACE (chain rules, execution stops once one of them returns true). An example of how role-based access control works with GraphQL Shield can be seen in Listing \ref{example} .

\label{example}
\begin{lstlisting}[label=example,caption=Role-based Access Control \cite{b1}]
import { shield, rule, and, or } from 'graphql-shield'

const isAdmin = rule()(async (parent, args, ctx, info) => {
  return ctx.user.role === 'admin'
})

const isEditor = rule()(async (parent, args, ctx, info) => {
  return ctx.user.role === 'editor'
})

const isOwner = rule()(async (parent, args, ctx, info) => {
  return ctx.user.items.some((id) => id === parent.id)
})

const permissions = shield({
  Query: {
    users: or(isAdmin, isEditor),
  },
  Mutation: {
    createBlogPost: or(isAdmin, and(isOwner, isEditor)),
  },
  User: {
    secret: isOwner,
  },
})
\end{lstlisting}

The code in Listing \ref{example} defines the following rules for a certain blog:

\begin{itemize}
    \item Only an editor or an admin can see a list of all users
    \item Only an admin or an owner with an editor role can create blog posts
    \item Only the owner of the blog can see user's secrets
\end{itemize}


\subsection{GraphQL Filter}\label{filter}

TODO

\section{Approach}\label{approach}

TODO (introduce our idea)

\begin{thebibliography}{00}
\bibitem{b1} M. (n.d.). maticzav/graphql-shield. GitHub. Retrieved May 12, 2021, from https://github.com/maticzav/graphql-shield.
\bibitem{b2} J. Clerk Maxwell, A Treatise on Electricity and Magnetism, 3rd ed., vol. 2. Oxford: Clarendon, 1892, pp.68--73.
\bibitem{b3} I. S. Jacobs and C. P. Bean, ``Fine particles, thin films and exchange anisotropy,'' in Magnetism, vol. III, G. T. Rado and H. Suhl, Eds. New York: Academic, 1963, pp. 271--350.
\bibitem{b4} K. Elissa, ``Title of paper if known,'' unpublished.
\bibitem{b5} R. Nicole, ``Title of paper with only first word capitalized,'' J. Name Stand. Abbrev., in press.
\bibitem{b6} Y. Yorozu, M. Hirano, K. Oka, and Y. Tagawa, ``Electron spectroscopy studies on magneto-optical media and plastic substrate interface,'' IEEE Transl. J. Magn. Japan, vol. 2, pp. 740--741, August 1987 [Digests 9th Annual Conf. Magnetics Japan, p. 301, 1982].
\bibitem{b7} M. Young, The Technical Writer's Handbook. Mill Valley, CA: University Science, 1989.
\end{thebibliography}

\end{document}
